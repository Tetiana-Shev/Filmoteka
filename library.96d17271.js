!function(){function t(t,e,n,a){Object.defineProperty(t,e,{get:n,set:a,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},o={},r=n.parcelRequired7c6;null==r&&((r=function(t){if(t in a)return a[t].exports;if(t in o){var e=o[t];delete o[t];var n={id:t,exports:{}};return a[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},n.parcelRequired7c6=r),r.register("iE7OH",(function(e,n){var a,o;t(e.exports,"register",(function(){return a}),(function(t){return a=t})),t(e.exports,"resolve",(function(){return o}),(function(t){return o=t}));var r={};a=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)r[e[n]]=t[e[n]]},o=function(t){var e=r[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),r.register("aNJCr",(function(e,n){var a;t(e.exports,"getBundleURL",(function(){return a}),(function(t){return a=t}));var o={};function r(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}a=function(t){var e=o[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(t)return r(t[2])}return"/"}(),o[t]=e),e}})),r("iE7OH").register(JSON.parse('{"2Y0K8":"library.96d17271.js","7VDdD":"file_not_found.886b5e99.jpg","2hvCh":"index.dcdacb90.js"}')),r("9h1VZ"),r("cVYaS"),r("fJHat");var i,c=r("4Nugj"),l=r("bpxeT"),d=r("2TvXO"),s=r("2oYM3"),u=r("eQLRL"),m=r("hRbC3"),f=(c=r("4Nugj"),r("aFT3d"));i=r("aNJCr").getBundleURL("2Y0K8")+r("iE7OH").resolve("7VDdD");c.default.wachedBtn.classList.add("library__btn--currenly"),c.default.queueBtn.classList.remove("library__btn--currenly"),C(),c.default.filmGalleryLib.addEventListener("click",(function(t){var e=t.target;if(e.classList.contains("gallery"))return;(0,u.spinnerPlay)();var n=e.closest("[data-id]").getAttribute("data-id");this.id="",s.default.getFilmsById(n).then((function(t){L.showBackdrop.classList.remove("is-hidden"),document.body.classList.add("modal-open");var e,n=H(t);L.modalDetail.innerHTML=n,m.default.currentlyOpenedFilm.filmData=t,function(t){B.apply(this,arguments)}({buttonWatched:(e={closeModalBtn:document.querySelector(".modal-detail__cross-frame"),modalDetail:document.querySelector("[data-detail-modal]"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),buttonWatched:document.querySelector(".button-watched"),buttonQueue:document.querySelector(".button-queue"),youTubeBtn:document.querySelector(".modal-detail__youtube")}).buttonWatched,buttonQueue:e.buttonQueue,id:t.id}),function(t){k.apply(this,arguments)}({moviePoster:e.moviePoster,youTubeBtn:e.youTubeBtn}),e.closeModalBtn.addEventListener("click",q),e.buttonWatched.addEventListener("click",D),e.buttonQueue.addEventListener("click",O)})).catch((function(t){return console.log(t)})).finally((function(){document.body.classList.add("modal-open"),document.addEventListener("keydown",S),L.modalDetailBackdrop.addEventListener("click",T),(0,u.spinnerStop)()}))}));var p=function(t){c.default.filmGalleryLib.innerHTML=" ";var n=t.map((function(t){var n,a=t.poster_path,o=t.original_title,r=t.genre_ids,c=t.release_date,l=t.id,d=t.vote_average,s=r.map(f.default);return s.length>2&&(s="".concat(s[0],", ").concat(s[1],", Other")),n=a?"https://image.tmdb.org/t/p/w500/".concat(a):e(i),'<div class="film__card" data-id='.concat(l,'>\n        <a class="film__link link" href="" onclick="event.preventDefault()">\n          <img class="film__img" src=').concat(n,' alt="" data-id=').concat(l,' loading="lazy"/>\n          <div class="film__info">\n            <h3 class="film__title">\n              ').concat(o,'\n            </h3>\n            <div class="film__details">\n          <div class="film__genre">').concat(s,'</div>\n          <div class="film__year">').concat(c.substr(0,4),'</div>\n          <div class="film__rating">').concat(d.toFixed(1),"</div>\n          </div>\n          </div>\n        </a>\n      </div>")})).join("");c.default.filmGalleryLib.innerHTML=n},v=r("ijwS8"),_=m.default.tags,b=_.WATCHED,y=_.QUEUE,h=(_.NOT_ADDED,"add"),g="delete",L={body:document.querySelector("body"),showBackdrop:document.querySelector("[data-detail-modal]"),modalDetail:document.querySelector(".modal-detal__container"),closeModalBtn:document.querySelector(".modal-detail__cross-frame"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),modalDetailBackdrop:document.querySelector(".modal-detail__backdrop"),filmGalleryLib:document.querySelector(".gallery-library"),wachedBtn:document.querySelector(".js-btn-watched"),queueBtn:document.querySelector(".js-btn-queue")};function x(){return w.apply(this,arguments)}function w(){return(w=e(l)(e(d).mark((function t(){var n,a,o;return e(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=m.default.currentlyOpenedFilm.filmData.id,t.next=3,s.default.getMovieTrailer(n);case 3:return a=t.sent,o=a.results.find((function(t){return"Trailer"===t.type})),t.abrupt("return",null==o?void 0:o.key);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=e(l)(e(d).mark((function t(n){var a,o,r;return e(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.moviePoster,o=n.youTubeBtn,t.next=3,x();case 3:(r=t.sent)&&(a.addEventListener("click",v.openModalTrailer),o.classList.remove("visually-hidden"),a.style.cursor="pointer",m.default.currentlyOpenedFilm.movieTrailerKey=r);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){L.modalDetailBackdrop.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",S),L.modalDetailBackdrop.removeEventListener("click",T),C()}function S(t){"Escape"===t.code&&q()}function T(t){t.target===L.modalDetailBackdrop&&q()}function C(){return E.apply(this,arguments)}function E(){return(E=e(l)(e(d).mark((function t(){var n,a;return e(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,u.spinnerPlay)(),t.prev=2,a=document.querySelector(".js-btn-watched"),n=a.classList.contains("library__btn--currenly")?m.default.tags.WATCHED:m.default.tags.QUEUE,t.next=7,m.default.getUserCollections().then((function(t){var e=null==t?void 0:t.filter((function(t){return t.tag===n}));e.length?p(e):L.filmGalleryLib.innerHTML=' <h2 class = "h2-central">There are no films in "'.concat(n,'" collection</h2>')})).catch((function(t){"No_USER"===t.message?(L.wachedBtn.classList.add("disabled"),L.queueBtn.classList.add("disabled"),L.filmGalleryLib.innerHTML=' <h2 class = "h2-central">Please login to view personal collections</h2>'):console.log(t)}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,(0,u.spinnerStop)(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))).apply(this,arguments)}function B(){return(B=e(l)(e(d).mark((function t(n){var a,o,r,i;return e(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.buttonWatched,o=n.buttonQueue,r=n.id,t.next=3,m.default.searchFilmInCollection(r);case 3:(i=t.sent)===b?(a.textContent="Remove from watched",a.dataset.action=g,a.classList.add("button-active"),o.textContent="Add to queue",o.dataset.action=h,o.classList.remove("button-active")):i===y?(a.textContent="Add to watched",a.dataset.action=h,a.classList.remove("button-active"),o.textContent="Remove from queue",o.dataset.action=g,o.classList.add("button-active")):(a.textContent="Add to watched",a.dataset.action=h,a.classList.remove("button-active"),o.textContent="Add to queue",o.dataset.action=h,o.classList.remove("button-active"));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){return F.apply(this,arguments)}function F(){return(F=e(l)(e(d).mark((function t(n){var a,o,r,i;return e(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target,document.querySelector(".modal-detal__container"),o=document.querySelector(".button-queue"),r=a.dataset.action,i=o.dataset.action,r!==h||i!==h){t.next=9;break}m.default.addFilmToCollection(b),a.dataset.action=g,a.textContent="Remove from watched",a.classList.add("button-active"),t.next=28;break;case 9:if(r!==h||i!==g){t.next=22;break}return t.next=12,m.default.deleteFilmFromCollection(m.default.currentlyOpenedFilm.filmData.id);case 12:return t.next=14,m.default.addFilmToCollection(b);case 14:a.dataset.action=g,a.textContent="Remove from watched",a.classList.add("button-active"),o.textContent="Add to queue",o.dataset.action=h,o.classList.remove("button-active"),t.next=28;break;case 22:if(r!==g){t.next=28;break}return t.next=25,m.default.deleteFilmFromCollection(m.default.currentlyOpenedFilm.filmData.id);case 25:a.dataset.action=h,a.textContent="Add to watched",a.classList.remove("button-active");case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return A.apply(this,arguments)}function A(){return(A=e(l)(e(d).mark((function t(n){var a,o,r,i;return e(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target,document.querySelector(".modal-detal__container"),o=document.querySelector(".button-watched"),r=o.dataset.action,(i=a.dataset.action)!==h||r!==h){t.next=9;break}m.default.addFilmToCollection(y),a.dataset.action=g,a.textContent="Remove from queue",a.classList.add("button-active"),t.next=28;break;case 9:if(i!==h||r!==g){t.next=22;break}return t.next=12,m.default.deleteFilmFromCollection(m.default.currentlyOpenedFilm.filmData.id);case 12:return t.next=14,m.default.addFilmToCollection(y);case 14:a.dataset.action=g,a.textContent="Remove from queue",a.classList.add("button-active"),o.textContent="Add to watched",o.dataset.action=h,o.classList.remove("button-active"),t.next=28;break;case 22:if(i!==g){t.next=28;break}return t.next=25,m.default.deleteFilmFromCollection(m.default.currentlyOpenedFilm.filmData.id);case 25:a.dataset.action=h,a.textContent="Add to queue",a.classList.remove("button-active");case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var H=function(t){var n=t.id,a=t.poster_path,o=t.title,r=t.vote_average,c=t.vote_count,l=t.popularity,d=t.original_title,s=t.genres,u=t.overview;return' <div class="modal-detail__cross-frame">\n      <i class="fa-solid fa-xmark"></i>\n    </div>\n  <div class="movie-poster">\n  <img\n            class="movie-image" data-id="'.concat(n,'"\n            src=').concat(a?"https://image.tmdb.org/t/p/w500/".concat(a):e(i),'\n            alt=""\n          />\n               <div class="modal-detail__youtube visually-hidden" data-modal-youtube>\n      <i class="fa-brands fa-youtube"></i>\n    </div>\n          </div>\n           <div class="movie-data">\n          <h2 class="data__title">').concat(o,'</h2>\n          <ul class="data__list list">\n            <li class="list__item">\n              <p class="data__item">Vote / Votes\n              </p>\n              <p class="data__info">\n                <span class="data__span data__span--orange">').concat(r,'</span>\n                <span data__span--divider> / </span>\n                <span class="data__span">').concat(c,'</span>\n              </p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Popularity</p>\n              <p class="data__info">').concat(l,'</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Original Title</p>\n              <p class="data__info data__info--upper">').concat(d,'</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Genre</p>\n              <p class="data__info">').concat(s.map((function(t){return t.name})).join(", "),'</p>\n            </li>\n          </ul>\n          <p class="data__about">About</p>\n          <p class="data__about-text">').concat(u,'</p>\n  <div class="buttons">\n        <button\n          type="button"\n          class="modal-detail__button button-watched"\n          data-click="addToWached"\n          data-action="add"\n        >\n          Add to watched\n        </button>\n        <button\n          type="button"\n          data-action="add"\n          class="modal-detail__button button-queue"\n          data-click="addToQueue"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>')};c.default.wachedBtn.addEventListener("click",(function(){c.default.wachedBtn.classList.add("library__btn--currenly"),c.default.queueBtn.classList.remove("library__btn--currenly"),C()})),c.default.queueBtn.addEventListener("click",(function(){c.default.wachedBtn.classList.remove("library__btn--currenly"),c.default.queueBtn.classList.add("library__btn--currenly"),C()}));var R="light-theme",j="dark-theme",M=document.querySelector("body"),P=document.querySelector("#theme-switch-toggle");localStorage.Theme===j&&(M.classList.add(j),P.checked=!0),M.addEventListener("change",(function(t){t.target.checked?(M.classList.remove(R),M.classList.add(j),localStorage.setItem("Theme",j)):(M.classList.remove(j),M.classList.add(R),localStorage.setItem("Theme",R))})),r("XJkyI"),r("your5"),r("fDiVl"),r("ghI91"),r("aZhHc"),r("ijwS8"),r("2NTPx"),r("2oYM3")}();
//# sourceMappingURL=library.96d17271.js.map
