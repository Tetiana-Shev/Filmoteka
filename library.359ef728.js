function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},d={},l=a.parcelRequired7c6;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in d){var t=d[e];delete d[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){d[e]=t},a.parcelRequired7c6=l),l.register("kyEFX",(function(t,a){var n,d;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return d}),(function(e){return d=e}));var l={};n=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)l[t[a]]=e[t[a]]},d=function(e){var t=l[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),l("kyEFX").register(JSON.parse('{"1zJhX":"library.359ef728.js","b6EE6":"file_not_found.886b5e99.jpg","b9auz":"index.2bdc21a3.js"}')),l("dldQF"),l("1wOgB"),l("lcy31");var o,i=l("krGWQ"),s=l("iB1XX"),c=l("1XX55"),r=l("jkUgE"),u=(i=l("krGWQ"),l("epGcV"));o=new URL(l("kyEFX").resolve("b6EE6"),import.meta.url).toString();i.default.wachedBtn.classList.add("library__btn--currenly"),i.default.queueBtn.classList.remove("library__btn--currenly"),L(),i.default.filmGalleryLib.addEventListener("click",(function({target:e}){if(e.classList.contains("gallery"))return;(0,c.spinnerPlay)();const t=e.closest("[data-id]").getAttribute("data-id");this.id="",s.default.getFilmsById(t).then((e=>{y.showBackdrop.classList.remove("is-hidden"),document.body.classList.add("modal-open");const t=k(e);y.modalDetail.innerHTML=t,r.default.currentlyOpenedFilm.filmData=e,(()=>{const t={closeModalBtn:document.querySelector(".modal-detail__cross-frame"),modalDetail:document.querySelector("[data-detail-modal]"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),buttonWatched:document.querySelector(".button-watched"),buttonQueue:document.querySelector(".button-queue"),youTubeBtn:document.querySelector(".modal-detail__youtube")};!async function({buttonWatched:e,buttonQueue:t,id:a}){const n=await r.default.searchFilmInCollection(a);n===_?(e.textContent="Remove from watched",e.dataset.action="delete",e.classList.add("button-active"),t.textContent="Add to queue",t.dataset.action="add",t.classList.remove("button-active")):n===v?(e.textContent="Add to watched",e.dataset.action="add",e.classList.remove("button-active"),t.textContent="Remove from queue",t.dataset.action="delete",t.classList.add("button-active")):(e.textContent="Add to watched",e.dataset.action="add",e.classList.remove("button-active"),t.textContent="Add to queue",t.dataset.action="add",t.classList.remove("button-active"))}({buttonWatched:t.buttonWatched,buttonQueue:t.buttonQueue,id:e.id}),async function({moviePoster:e,youTubeBtn:t}){const a=await async function(){const e=r.default.currentlyOpenedFilm.filmData.id,t=(await s.default.getMovieTrailer(e)).results.find((e=>"Trailer"===e.type));return null==t?void 0:t.key}();a&&(e.addEventListener("click",f.openModalTrailer),t.classList.remove("visually-hidden"),e.style.cursor="pointer",r.default.currentlyOpenedFilm.movieTrailerKey=a)}({moviePoster:t.moviePoster,youTubeBtn:t.youTubeBtn}),t.closeModalBtn.addEventListener("click",p),t.buttonWatched.addEventListener("click",w),t.buttonQueue.addEventListener("click",q)})()})).catch((e=>console.log(e))).finally((()=>{document.body.classList.add("modal-open"),document.addEventListener("keydown",h),y.modalDetailBackdrop.addEventListener("click",g),(0,c.spinnerStop)()}))}));var m=e=>{i.default.filmGalleryLib.innerHTML=" ";const a=e.map((({poster_path:e,original_title:a,genre_ids:n,release_date:d,id:l,vote_average:i})=>{let s,c=n.map(u.default);return c.length>2&&(c=`${c[0]}, ${c[1]}, Other`),s=e?`https://image.tmdb.org/t/p/w500/${e}`:t(o),`<div class="film__card" data-id=${l}>\n        <a class="film__link link" href="" onclick="event.preventDefault()">\n          <img class="film__img" src=${s} alt="" data-id=${l} loading="lazy"/>\n          <div class="film__info">\n            <h3 class="film__title">\n              ${a}\n            </h3>\n            <div class="film__details">\n          <div class="film__genre">${c}</div>\n          <div class="film__year">${d.substr(0,4)}</div>\n          <div class="film__rating">${i.toFixed(1)}</div>\n          </div>\n          </div>\n        </a>\n      </div>`})).join("");i.default.filmGalleryLib.innerHTML=a},f=l("I2Abx");const{WATCHED:_,QUEUE:v,NOT_ADDED:b}=r.default.tags,y={body:document.querySelector("body"),showBackdrop:document.querySelector("[data-detail-modal]"),modalDetail:document.querySelector(".modal-detal__container"),closeModalBtn:document.querySelector(".modal-detail__cross-frame"),moviePoster:document.querySelector(".movie-poster"),movieInfo:document.querySelector(".movie-data"),modalDetailBackdrop:document.querySelector(".modal-detail__backdrop"),filmGalleryLib:document.querySelector(".gallery-library"),wachedBtn:document.querySelector(".js-btn-watched"),queueBtn:document.querySelector(".js-btn-queue")};function p(){y.modalDetailBackdrop.classList.add("is-hidden"),document.body.classList.remove("modal-open"),document.removeEventListener("keydown",h),y.modalDetailBackdrop.removeEventListener("click",g),L()}function h(e){"Escape"===e.code&&p()}function g(e){e.target===y.modalDetailBackdrop&&p()}async function L(){let e;(0,c.spinnerPlay)();try{const t=document.querySelector(".js-btn-watched");e=t.classList.contains("library__btn--currenly")?r.default.tags.WATCHED:r.default.tags.QUEUE,await r.default.getUserCollections().then((t=>{const a=null==t?void 0:t.filter((t=>t.tag===e));a.length?m(a):y.filmGalleryLib.innerHTML=` <h2 class = "h2-central">There are no films in "${e}" collection</h2>`})).catch((e=>{"No_USER"===e.message?(y.wachedBtn.classList.add("disabled"),y.queueBtn.classList.add("disabled"),y.filmGalleryLib.innerHTML=' <h2 class = "h2-central">Please login to view personal collections</h2>'):console.log(e)}))}catch(e){console.log(e)}finally{(0,c.spinnerStop)()}}async function w({target:e}){document.querySelector(".modal-detal__container");const t=document.querySelector(".button-queue"),a=e.dataset.action,n=t.dataset.action;"add"===a&&"add"===n?(r.default.addFilmToCollection(_),e.dataset.action="delete",e.textContent="Remove from watched",e.classList.add("button-active")):"add"===a&&"delete"===n?(await r.default.deleteFilmFromCollection(r.default.currentlyOpenedFilm.filmData.id),await r.default.addFilmToCollection(_),e.dataset.action="delete",e.textContent="Remove from watched",e.classList.add("button-active"),t.textContent="Add to queue",t.dataset.action="add",t.classList.remove("button-active")):"delete"===a&&(await r.default.deleteFilmFromCollection(r.default.currentlyOpenedFilm.filmData.id),e.dataset.action="add",e.textContent="Add to watched",e.classList.remove("button-active"))}async function q({target:e}){document.querySelector(".modal-detal__container");const t=document.querySelector(".button-watched"),a=t.dataset.action,n=e.dataset.action;"add"===n&&"add"===a?(r.default.addFilmToCollection(v),e.dataset.action="delete",e.textContent="Remove from queue",e.classList.add("button-active")):"add"===n&&"delete"===a?(await r.default.deleteFilmFromCollection(r.default.currentlyOpenedFilm.filmData.id),await r.default.addFilmToCollection(v),e.dataset.action="delete",e.textContent="Remove from queue",e.classList.add("button-active"),t.textContent="Add to watched",t.dataset.action="add",t.classList.remove("button-active")):"delete"===n&&(await r.default.deleteFilmFromCollection(r.default.currentlyOpenedFilm.filmData.id),e.dataset.action="add",e.textContent="Add to queue",e.classList.remove("button-active"))}const k=({id:e,poster_path:a,title:n,vote_average:d,vote_count:l,popularity:i,original_title:s,genres:c,overview:r})=>` <div class="modal-detail__cross-frame">\n      <i class="fa-solid fa-xmark"></i>\n    </div>\n  <div class="movie-poster">\n  <img\n            class="movie-image" data-id="${e}"\n            src=${a?`https://image.tmdb.org/t/p/w500/${a}`:t(o)}\n            alt=""\n          />\n               <div class="modal-detail__youtube visually-hidden" data-modal-youtube>\n      <i class="fa-brands fa-youtube"></i>\n    </div>\n          </div>\n           <div class="movie-data">\n          <h2 class="data__title">${n}</h2>\n          <ul class="data__list list">\n            <li class="list__item">\n              <p class="data__item">Vote / Votes\n              </p>\n              <p class="data__info">\n                <span class="data__span data__span--orange">${d}</span>\n                <span data__span--divider> / </span>\n                <span class="data__span">${l}</span>\n              </p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Popularity</p>\n              <p class="data__info">${i}</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Original Title</p>\n              <p class="data__info data__info--upper">${s}</p>\n            </li>\n            <li class="list__item">\n              <p class="data__item">Genre</p>\n              <p class="data__info">${c.map((e=>e.name)).join(", ")}</p>\n            </li>\n          </ul>\n          <p class="data__about">About</p>\n          <p class="data__about-text">${r}</p>\n  <div class="buttons">\n        <button\n          type="button"\n          class="modal-detail__button button-watched"\n          data-click="addToWached"\n          data-action="add"\n        >\n          Add to watched\n        </button>\n        <button\n          type="button"\n          data-action="add"\n          class="modal-detail__button button-queue"\n          data-click="addToQueue"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>`;i.default.wachedBtn.addEventListener("click",(function(){i.default.wachedBtn.classList.add("library__btn--currenly"),i.default.queueBtn.classList.remove("library__btn--currenly"),L()})),i.default.queueBtn.addEventListener("click",(function(){i.default.wachedBtn.classList.remove("library__btn--currenly"),i.default.queueBtn.classList.add("library__btn--currenly"),L()}));const E="light-theme",S="dark-theme",T=document.querySelector("body"),B=document.querySelector("#theme-switch-toggle");localStorage.Theme===S&&(T.classList.add(S),B.checked=!0),T.addEventListener("change",(function(e){e.target.checked?(T.classList.remove(E),T.classList.add(S),localStorage.setItem("Theme",S)):(T.classList.remove(S),T.classList.add(E),localStorage.setItem("Theme",E))})),l("cpWOc"),l("311xP"),l("3hXKf"),l("h53OD"),l("7bYU0"),l("I2Abx"),l("kThre"),l("iB1XX");
//# sourceMappingURL=library.359ef728.js.map
