{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-bc44127ee3c176e7.js","src/library.js","src/js/library/header.js","src/js/modal-detail-lib.js","node_modules/@parcel/runtime-js/lib/runtime-800db168570a36fe.js","src/js/library/gallery.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2Y0K8\\\":\\\"library.96d17271.js\\\",\\\"7VDdD\\\":\\\"file_not_found.886b5e99.jpg\\\",\\\"2hvCh\\\":\\\"index.dcdacb90.js\\\"}\"));","import '../node_modules/@fortawesome/fontawesome-free/js/fontawesome';\nimport '../node_modules/@fortawesome/fontawesome-free/js/solid';\nimport '../node_modules/@fortawesome/fontawesome-free/js/brands';\n\n// import './js/modal-spinner';\nimport './js/library/header';\nimport './js/index/authenticate';\nimport './js/library/gallery';\nimport './js/index/footer';\n\nimport './js/modal-login';\n// import './js/modal-detail-lib';\nimport './js/button-up';\nimport './js/modal-team';\nimport './js/modal-trailer';\n\nimport './js/firebase/firebase';\nimport './js/moviedb/moviedb';\n","import refs from '../refs';\nimport { refreshLibrary } from '../modal-detail-lib';\n\nrefs.wachedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onWatchedBtnClick() {\n  refs.wachedBtn.classList.add('library__btn--currenly');\n  refs.queueBtn.classList.remove('library__btn--currenly');\n  refreshLibrary();\n}\n\nfunction onQueueBtnClick() {\n  refs.wachedBtn.classList.remove('library__btn--currenly');\n  refs.queueBtn.classList.add('library__btn--currenly');\n  refreshLibrary();\n}\n\n\n// ========================= Change Theme================\nconst Theme = {\n  LIGHT: 'light-theme',\n  DARK: 'dark-theme',\n};\n\nconst bodyRef = document.querySelector('body');\nconst switchRef = document.querySelector('#theme-switch-toggle');\n\n// дефолтная тема\nfunction defaultTheme() {\n  const defaultTheme = localStorage['Theme'];\n\n  if (defaultTheme === Theme.DARK) {\n    bodyRef.classList.add(Theme.DARK);\n    switchRef.checked = true;\n  }\n}\ndefaultTheme();\n\n//смена темы со светлой на тёмную\n\nbodyRef.addEventListener('change', onThemeChenge);\n\nfunction onThemeChenge(event) {\n  if (event.target.checked) {\n    bodyRef.classList.remove(Theme.LIGHT);\n    bodyRef.classList.add(Theme.DARK);\n\n    localStorage.setItem('Theme', Theme.DARK);\n  } else {\n    bodyRef.classList.remove(Theme.DARK);\n    bodyRef.classList.add(Theme.LIGHT);\n\n    localStorage.setItem('Theme', Theme.LIGHT);\n  }\n}\n","import movieService from './moviedb/moviedb';\nimport { spinnerPlay, spinnerStop } from './modal-spinner';\nimport cloudStorage from './firebase/cloudstorage';\nimport renderGalleryLib from '../js/library/gallery';\nimport { openModalTrailer, closeModalTrailer } from './modal-trailer';\n// import refs from '../js/refs';\nconst { WATCHED, QUEUE, NOT_ADDED } = cloudStorage.tags;\nimport poster from '../images/gallery/file_not_found.jpg';\n\nconst ADD = 'add';\nconst DELETE = 'delete';\n\nconst refs = {\n  body: document.querySelector('body'),\n  showBackdrop: document.querySelector('[data-detail-modal]'),\n  modalDetail: document.querySelector('.modal-detal__container'),\n  closeModalBtn: document.querySelector('.modal-detail__cross-frame'),\n  moviePoster: document.querySelector('.movie-poster'),\n  movieInfo: document.querySelector('.movie-data'),\n  modalDetailBackdrop: document.querySelector('.modal-detail__backdrop'),\n  filmGalleryLib: document.querySelector('.gallery-library'),\n  wachedBtn: document.querySelector('.js-btn-watched'),\n  queueBtn: document.querySelector('.js-btn-queue'),\n};\n\nexport function renderModalDetail({ target }) {\n  if (target.classList.contains('gallery')) {\n    return;\n  }\n  spinnerPlay();\n  const filmCard = target.closest('[data-id]');\n  const id = filmCard.getAttribute('data-id');\n  this.id = '';\n  movieService\n    .getFilmsById(id)\n    .then(data => {\n      refs.showBackdrop.classList.remove('is-hidden');\n      document.body.classList.add('modal-open');\n      const markup = modalDetailMarkup(data);\n      refs.modalDetail.innerHTML = markup;\n      cloudStorage.currentlyOpenedFilm.filmData = data;\n\n      (() => {\n        const refs = {\n          closeModalBtn: document.querySelector('.modal-detail__cross-frame'),\n          modalDetail: document.querySelector('[data-detail-modal]'),\n          moviePoster: document.querySelector('.movie-poster'),\n          movieInfo: document.querySelector('.movie-data'),\n          buttonWatched: document.querySelector('.button-watched'),\n          buttonQueue: document.querySelector('.button-queue'),\n          youTubeBtn: document.querySelector('.modal-detail__youtube'),\n        };\n\n        setButtonStyle({\n          buttonWatched: refs.buttonWatched,\n          buttonQueue: refs.buttonQueue,\n          id: data.id,\n        });\n\n        setYouTubeBtn({\n          moviePoster: refs.moviePoster,\n          youTubeBtn: refs.youTubeBtn,\n        });\n\n        refs.closeModalBtn.addEventListener('click', closeModalDetail);\n        refs.buttonWatched.addEventListener('click', onButtonWatchedClick);\n        refs.buttonQueue.addEventListener('click', onButtonQueueClick);\n      })();\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      document.body.classList.add('modal-open');\n      document.addEventListener('keydown', onModalDetailKeydown);\n      refs.modalDetailBackdrop.addEventListener(\n        'click',\n        onModalDetailBackdropClick\n      );\n      spinnerStop();\n    });\n}\n\nasync function findMovieTrailer() {\n  const id = cloudStorage.currentlyOpenedFilm.filmData.id;\n  const videos = await movieService.getMovieTrailer(id);\n  const trailer = videos.results.find(e => e.type === 'Trailer');\n  return trailer?.key;\n}\n\nasync function setYouTubeBtn({ moviePoster, youTubeBtn }) {\n  const movieTrailerKey = await findMovieTrailer();\n  if (movieTrailerKey) {\n    moviePoster.addEventListener('click', openModalTrailer);\n    youTubeBtn.classList.remove('visually-hidden');\n    moviePoster.style.cursor = 'pointer';\n    cloudStorage.currentlyOpenedFilm.movieTrailerKey = movieTrailerKey;\n  } else {\n  }\n}\n\nfunction closeModalDetail() {\n  refs.modalDetailBackdrop.classList.add('is-hidden');\n  document.body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onModalDetailKeydown);\n  refs.modalDetailBackdrop.removeEventListener(\n    'click',\n    onModalDetailBackdropClick\n  );\n  refreshLibrary();\n}\n\nfunction onModalDetailKeydown(event) {\n  if (event.code === 'Escape') {\n    closeModalDetail();\n  }\n}\n\nfunction onModalDetailBackdropClick(event) {\n  if (event.target === refs.modalDetailBackdrop) {\n    closeModalDetail();\n  }\n}\n\nexport async function refreshLibrary() {\n  let currentLibrary;\n  // console.log('in refreshLibrary()');\n  spinnerPlay();\n  try {\n    const btnWatchedCollection = document.querySelector('.js-btn-watched');\n    if (btnWatchedCollection.classList.contains('library__btn--currenly')) {\n      currentLibrary = cloudStorage.tags.WATCHED;\n    } else {\n      currentLibrary = cloudStorage.tags.QUEUE;\n    }\n    await cloudStorage\n      .getUserCollections()\n      .then(films => {\n        const filmsSorted = films?.filter(film => film.tag === currentLibrary);\n        //   console.log(watchedFilms);\n        if (filmsSorted.length) {\n          renderGalleryLib(filmsSorted);\n        } else {\n          refs.filmGalleryLib.innerHTML = ` <h2 class = \"h2-central\">There are no films in \"${currentLibrary}\" collection</h2>`;\n        }\n      })\n      .catch(error => {\n        if (error.message === 'No_USER') {\n          refs.wachedBtn.classList.add('disabled');\n          refs.queueBtn.classList.add('disabled');\n          refs.filmGalleryLib.innerHTML =\n            ' <h2 class = \"h2-central\">Please login to view personal collections</h2>';\n        } else {\n          console.log(error);\n        }\n      });\n  } catch (error) {\n    console.log(error);\n  } finally {\n    spinnerStop();\n  }\n}\n\nasync function setButtonStyle({ buttonWatched, buttonQueue, id }) {\n  const tag = await cloudStorage.searchFilmInCollection(id);\n  if (tag === WATCHED) {\n    buttonWatched.textContent = 'Remove from watched';\n    buttonWatched.dataset.action = DELETE;\n    buttonWatched.classList.add('button-active');\n\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.classList.remove('button-active');\n  } else if (tag === QUEUE) {\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.classList.remove('button-active');\n\n    buttonQueue.textContent = 'Remove from queue';\n    buttonQueue.dataset.action = DELETE;\n    buttonQueue.classList.add('button-active');\n  } else {\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.classList.remove('button-active');\n\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.classList.remove('button-active');\n  }\n}\n\nasync function onButtonWatchedClick({ target: buttonWatched }) {\n  const modalContainer = document.querySelector('.modal-detal__container');\n  const buttonQueue = document.querySelector('.button-queue');\n  const watchedBtnState = buttonWatched.dataset.action;\n  const queueBtnState = buttonQueue.dataset.action;\n  if (watchedBtnState === ADD && queueBtnState === ADD) {\n    cloudStorage.addFilmToCollection(WATCHED);\n    buttonWatched.dataset.action = DELETE;\n    buttonWatched.textContent = 'Remove from watched';\n    buttonWatched.classList.add('button-active');\n  } else if (watchedBtnState === ADD && queueBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    await cloudStorage.addFilmToCollection(WATCHED);\n    buttonWatched.dataset.action = DELETE;\n    buttonWatched.textContent = 'Remove from watched';\n    buttonWatched.classList.add('button-active');\n\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.classList.remove('button-active');\n  } else if (watchedBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.classList.remove('button-active');\n  }\n  // modalContainer.click();\n}\n\nasync function onButtonQueueClick({ target: buttonQueue }) {\n  const modalContainer = document.querySelector('.modal-detal__container');\n  const buttonWatched = document.querySelector('.button-watched');\n  const watchedBtnState = buttonWatched.dataset.action;\n  const queueBtnState = buttonQueue.dataset.action;\n  if (queueBtnState === ADD && watchedBtnState === ADD) {\n    cloudStorage.addFilmToCollection(QUEUE);\n    buttonQueue.dataset.action = DELETE;\n    buttonQueue.textContent = 'Remove from queue';\n    buttonQueue.classList.add('button-active');\n  } else if (queueBtnState === ADD && watchedBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    await cloudStorage.addFilmToCollection(QUEUE);\n    buttonQueue.dataset.action = DELETE;\n    buttonQueue.textContent = 'Remove from queue';\n    buttonQueue.classList.add('button-active');\n\n    buttonWatched.textContent = 'Add to watched';\n    buttonWatched.dataset.action = ADD;\n    buttonWatched.classList.remove('button-active');\n  } else if (queueBtnState === DELETE) {\n    await cloudStorage.deleteFilmFromCollection(\n      cloudStorage.currentlyOpenedFilm.filmData.id\n    );\n    buttonQueue.dataset.action = ADD;\n    buttonQueue.textContent = 'Add to queue';\n    buttonQueue.classList.remove('button-active');\n  }\n  // modalContainer.click();\n}\n\nconst modalDetailMarkup = ({\n  id,\n  poster_path,\n  title,\n  vote_average,\n  vote_count,\n  popularity,\n  original_title,\n  genres,\n  overview,\n}) => {\n  return ` <div class=\"modal-detail__cross-frame\">\n      <i class=\"fa-solid fa-xmark\"></i>\n    </div>\n  <div class=\"movie-poster\">\n  <img\n            class=\"movie-image\" data-id=\"${id}\"\n            src=${\n              poster_path\n                ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n                : poster\n            }\n            alt=\"\"\n          />\n               <div class=\"modal-detail__youtube visually-hidden\" data-modal-youtube>\n      <i class=\"fa-brands fa-youtube\"></i>\n    </div>\n          </div>\n           <div class=\"movie-data\">\n          <h2 class=\"data__title\">${title}</h2>\n          <ul class=\"data__list list\">\n            <li class=\"list__item\">\n              <p class=\"data__item\">Vote / Votes\n              </p>\n              <p class=\"data__info\">\n                <span class=\"data__span data__span--orange\">${vote_average}</span>\n                <span data__span--divider> / </span>\n                <span class=\"data__span\">${vote_count}</span>\n              </p>\n            </li>\n            <li class=\"list__item\">\n              <p class=\"data__item\">Popularity</p>\n              <p class=\"data__info\">${popularity}</p>\n            </li>\n            <li class=\"list__item\">\n              <p class=\"data__item\">Original Title</p>\n              <p class=\"data__info data__info--upper\">${original_title}</p>\n            </li>\n            <li class=\"list__item\">\n              <p class=\"data__item\">Genre</p>\n              <p class=\"data__info\">${genres\n                .map(genre => genre.name)\n                .join(', ')}</p>\n            </li>\n          </ul>\n          <p class=\"data__about\">About</p>\n          <p class=\"data__about-text\">${overview}</p>\n  <div class=\"buttons\">\n        <button\n          type=\"button\"\n          class=\"modal-detail__button button-watched\"\n          data-click=\"addToWached\"\n          data-action=\"add\"\n        >\n          Add to watched\n        </button>\n        <button\n          type=\"button\"\n          data-action=\"add\"\n          class=\"modal-detail__button button-queue\"\n          data-click=\"addToQueue\"\n        >\n          Add to queue\n        </button>\n      </div>\n    </div>`;\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"7VDdD\");","import { renderModalDetail } from '../modal-detail-lib';\nimport refs from '../refs';\nimport { refreshLibrary } from '../modal-detail-lib';\nimport getGanreName from '../moviedb/genres';\nimport poster from '../../images/gallery/file_not_found.jpg';\n\nexport const renderGalleryLib = galleryArray => {\n  refs.filmGalleryLib.innerHTML = ' ';\n  const result = galleryArray\n    .map(\n      ({\n        poster_path,\n        original_title,\n        genre_ids,\n        release_date,\n        id,\n        vote_average,\n      }) => {\n        let genres = genre_ids.map(getGanreName);\n        if (genres.length > 2) {\n          genres = `${genres[0]}, ${genres[1]}, Other`;\n        }\n        let posterUrl;\n        if (!poster_path) {\n          posterUrl = poster;\n        } else {\n          posterUrl = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n        }\n        return `<div class=\"film__card\" data-id=${id}>\n        <a class=\"film__link link\" href=\"\" onclick=\"event.preventDefault()\">\n          <img class=\"film__img\" src=${posterUrl} alt=\"\" data-id=${id} loading=\"lazy\"/>\n          <div class=\"film__info\">\n            <h3 class=\"film__title\">\n              ${original_title}\n            </h3>\n            <div class=\"film__details\">\n          <div class=\"film__genre\">${genres}</div>\n          <div class=\"film__year\">${release_date.substr(0, 4)}</div>\n          <div class=\"film__rating\">${vote_average.toFixed(1)}</div>\n          </div>\n          </div>\n        </a>\n      </div>`;\n      }\n    )\n    .join('');\n  refs.filmGalleryLib.innerHTML = result;\n};\n\nrefs.wachedBtn.classList.add('library__btn--currenly');\nrefs.queueBtn.classList.remove('library__btn--currenly');\n\nrefreshLibrary();\n\nrefs.filmGalleryLib.addEventListener('click', renderModalDetail);\n\nexport default renderGalleryLib;\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$4Nugj","$bpxeT","$58baeb312bc5ca4f$exports","getBundleURL","resolve","default","wachedBtn","classList","add","queueBtn","remove","$58d2cafe47578f36$export$594cf5cf1eae6182","filmGalleryLib","addEventListener","param","target","contains","$eQLRL","spinnerPlay","closest","getAttribute","this","$2oYM3","getFilmsById","then","data","$58d2cafe47578f36$var$refs","showBackdrop","document","body","refs1","markup","$58d2cafe47578f36$var$modalDetailMarkup","modalDetail","innerHTML","$hRbC3","currentlyOpenedFilm","filmData","_","$58d2cafe47578f36$var$_setButtonStyle","apply","arguments","$58d2cafe47578f36$var$setButtonStyle","buttonWatched","closeModalBtn","querySelector","moviePoster","movieInfo","buttonQueue","youTubeBtn","$58d2cafe47578f36$var$_setYouTubeBtn","$58d2cafe47578f36$var$setYouTubeBtn","$58d2cafe47578f36$var$closeModalDetail","$58d2cafe47578f36$var$onButtonWatchedClick","$58d2cafe47578f36$var$onButtonQueueClick","catch","error","console","log","finally","$58d2cafe47578f36$var$onModalDetailKeydown","modalDetailBackdrop","$58d2cafe47578f36$var$onModalDetailBackdropClick","spinnerStop","$2e62e64138152ef0$export$2e2bcd8739ae039","galleryArray","result","map","posterUrl","poster_path","original_title","genre_ids","release_date","vote_average","genres","$aFT3d","concat","$parcel$interopDefault","substr","toFixed","join","$58d2cafe47578f36$var$_tags","tags","$58d2cafe47578f36$var$WATCHED","WATCHED","$58d2cafe47578f36$var$QUEUE","QUEUE","$58d2cafe47578f36$var$ADD","NOT_ADDED","$58d2cafe47578f36$var$DELETE","$58d2cafe47578f36$var$findMovieTrailer","$58d2cafe47578f36$var$_findMovieTrailer","$2TvXO","mark","_callee","videos","trailer","getMovieTrailer","_ctx","sent","results","find","e","type","key","movieTrailerKey","$ijwS8","openModalTrailer","style","cursor","removeEventListener","event","code","$58d2cafe47578f36$var$_refreshLibrary","currentLibrary","btnWatchedCollection","getUserCollections","films","filmsSorted","filter","film","tag","message","t0","searchFilmInCollection","textContent","dataset","action","$58d2cafe47578f36$var$_onButtonWatchedClick","watchedBtnState","queueBtnState","addFilmToCollection","deleteFilmFromCollection","$58d2cafe47578f36$var$_onButtonQueueClick","title","vote_count","popularity","overview","genre","name","$d9d8599c0bf79a84$var$Theme","$d9d8599c0bf79a84$var$bodyRef","$d9d8599c0bf79a84$var$switchRef","localStorage","checked","setItem"],"version":3,"file":"library.96d17271.js.map"}